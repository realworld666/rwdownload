<?php/* * Copyright (c) 2023. * RW::Software * Dave Conley * https://www.rwscripts.com/ */class admin_modules{	function admin_modules()	{		global $rwdInfo;		$handle = opendir(ROOT_PATH . "/modules/");		while (($filename = readdir($handle)) !== false) {			if (($filename != ".") and ($filename != "..")) {				if (is_dir(ROOT_PATH . "/modules/" . $filename) and file_exists(ROOT_PATH . "/modules/" . $filename . "/module.php")) {					// Remove suspicious characters					if (is_file(ROOT_PATH . "/modules/{$filename}/admin/admin_extra.php")) {						$filename = preg_replace("/[^a-zA-Z0-9\-\_]/", "", $filename);						require_once(ROOT_PATH . "/modules/{$filename}/admin/admin_extra.php");						$rwdInfo->loaded_modules[$filename] = $mod_ad_extra;					}				}			}		}	}	function loadModule()	{		global $rwdInfo, $IN;		$rwdInfo->loaded_modules[$IN['modname']]->parseArguments();	}	function userOptions($data)	{		global $rwdInfo;		$output = "";		if (!empty($rwdInfo->loaded_modules)) {			foreach ($rwdInfo->loaded_modules as $mod) {				if (is_callable(array($mod, "userOptions"))) {					$output .= $mod->userOptions($data);				}			}		}		return $output;	}	function saveUserData($data)	{		global $rwdInfo;		$output = array();		if (!empty($rwdInfo->loaded_modules)) {			foreach ($rwdInfo->loaded_modules as $mod) {				if (is_callable(array($mod, "saveUserData"))) {					$output = array_merge($output, $mod->saveUserData($data));				}			}		}		return $output;	}	function groupOptions($data)	{		global $rwdInfo;		$output = "";		if (!empty($rwdInfo->loaded_modules)) {			foreach ($rwdInfo->loaded_modules as $mod) {				if (is_callable(array($mod, "groupOptions"))) {					$output .= $mod->groupOptions($data);				}			}		}		return $output;	}	function saveGroupData($data)	{		global $rwdInfo;		$output = array();		if (!empty($rwdInfo->loaded_modules)) {			foreach ($rwdInfo->loaded_modules as $mod) {				if (is_callable(array($mod, "saveGroupData"))) {					$newarray = $mod->saveGroupData($data);					if (!empty($newarray))						$output = array_merge($output, $newarray);				}			}		}		return $output;	}	function modulesNav()	{		global $rwdInfo;		$output = "";		if (!empty($rwdInfo->loaded_modules)) {			foreach ($rwdInfo->loaded_modules as $mod) {				if (is_callable(array($mod, "moduleNav"))) {					$output .= $mod->moduleNav();				}			}		}		return $output;	}}?>